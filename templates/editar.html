{% extends "base.html" %}
{% block content %}

<h2 class="text-center mb-4">
  <span class="badge bg-success">✏️ Editar Oferta</span>
</h2>

<form method="POST" action="/editar/{{ producto.id }}">
  <div class="card p-4 mb-4">
    <h4 class="mb-3">📦 Datos del Producto</h4>
    <div class="mb-3">
      <label class="form-label">Nombre del producto *</label>
      <input type="text" name="nombre" class="form-control" value="{{ producto.nombre }}" required>
    </div>

    <div class="row mb-3">
      <div class="col-md-6">
        <label class="form-label">Cantidad *</label>
        <input type="number" step="0.1" name="cantidad" class="form-control" value="{{ producto.cantidad }}" required>
      </div>
      <div class="col-md-6">
        <label class="form-label">Unidad (kg, unidades, racimos...) *</label>
        <input type="text" name="unidad" class="form-control" value="{{ producto.unidad }}" required>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Precio por unidad ($)</label>
      <input type="number" step="100" name="precio" class="form-control" value="{{ producto.precio }}" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Categoría *</label>
      <select name="categoria_id" class="form-select" required>
        {% for cat in categorias %}
          {% set estilo = categoria_estilos.get(cat.nombre, {"icono": "🌱"}) %}
          <option value="{{ cat.id }}" {% if cat.id == producto.categoria_id %}selected{% endif %}>
            {{ estilo.icono }} {{ cat.nombre }}
          </option>
        {% endfor %}
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label">Descripción (opcional)</label>
      <textarea name="descripcion" class="form-control" rows="3">{{ producto.descripcion }}</textarea>
    </div>
  </div>

  <div class="d-grid gap-2">
    <button type="submit" class="btn btn-3d">✅ Guardar Cambios</button>
    <a href="/" class="btn btn-outline-3d">⬅️ Cancelar</a>
  </div>
</form>

{% endblock %}